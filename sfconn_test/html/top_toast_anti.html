<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
	<title>iOS Top Toast</title>
	<style>
		body {
			touch-action: manipulation; /* ë”ë¸” íƒ­ í™•ëŒ€ ë°©ì§€ */
			margin: 0;
			padding: 0;
			font-family: sans-serif;
			transition: background-color 0.3s ease, color 0.3s ease; /* ë‹¤í¬ ëª¨ë“œ ì „í™˜ ì• ë‹ˆë©”ì´ì…˜ */
		}

		/* í…ŒìŠ¤íŠ¸ìš© ë²„íŠ¼ íŒ¨ë„ */
		.test_buttons {
			padding: 20px;
			text-align: center;
		}
		
		.test_buttons button {
			margin: 4px;
			padding: 8px 16px;
			border-radius: 6px;
			border: 1px solid #ddd;
			background-color: #f8f9fa;
			color: #333;
			font-size: 14px;
			cursor: pointer;
			transition: all 0.2s;
		}

		/* iOS ìŠ¤íƒ€ì¼ ìƒë‹¨ í† ìŠ¤íŠ¸ íŒì—… (Dynamic Island / Banner Style / Swipe) */
		.toast_ios_top {
			position: fixed;
			top: -100px;
			left: 16px;
			right: 16px;
			margin: 0 auto;
			box-sizing: border-box;
			max-width: 400px;
			background-color: rgba(255, 255, 255, 0.75);
			backdrop-filter: blur(20px);
			-webkit-backdrop-filter: blur(20px);
			border-radius: 24px;
			box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12), 0 1px 3px rgba(0,0,0,0.05);
			z-index: 1000;
			display: flex;
			align-items: center;
			padding: 12px 16px;
			transition: top 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), transform 0.3s cubic-bezier(0.25, 1, 0.5, 1); /* ë³µê·€ ì• ë‹ˆë©”ì´ì…˜ ë¶„ë¦¬ */
			touch-action: none; /* ë“œë˜ê·¸ ì¤‘ ì‹œìŠ¤í…œ ìŠ¤í¬ë¡¤ ë°©ì§€ìš© */
			will-change: transform; /* ë“œë˜ê·¸ ì• ë‹ˆë©”ì´ì…˜ í”„ë ˆì„ ë“œë ë° ë²„ë²…ì„ ë°©ì§€ */
			cursor: grab;
		}

		.toast_ios_top:active {
			cursor: grabbing;
		}

		.toast_ios_top.show {
			top: 25px; /* í™œì„±í™” ì‹œ ì•ˆì „ì˜ì—­ ì•„ë˜ë¡œ ë‚´ë ¤ì˜´ */
		}

		/* ë‹«í ë•Œ ì‚¬ë¼ì§€ëŠ” íˆ¬ëª…ë„ ë° ì¶•ì†Œ íš¨ê³¼ (ìŠ¤ì™€ì´í”„ ì™¸ ìì—° ë‹«í˜ìš©) */
		.toast_ios_top.hiding {
			opacity: 0;
			transform: scale(0.8) translateY(-20px);
			transition: opacity 0.4s ease, transform 0.4s ease, top 0.4s ease;
		}

		.ios_icon {
			width: 36px;
			height: 36px;
			background-color: #007aff;
			border-radius: 10px;
			display: flex;
			justify-content: center;
			align-items: center;
			color: #fff;
			font-size: 18px;
			margin-right: 12px;
			flex-shrink: 0;
		}

		.ios_text_wrap {
			display: flex;
			flex-direction: column;
		}

		.ios_title {
			font-size: 14px;
			font-weight: 600;
			color: #1c1c1e;
			margin-bottom: 2px;
			font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
		}

		.ios_message {
			font-size: 13px;
			color: #3a3a3c;
			font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", Arial, sans-serif;
		}

		/* ë‹¤í¬ ëª¨ë“œ ì†ì„± (OS ì„¤ì • ìë™ ê°ì§€) */
		@media (prefers-color-scheme: dark) {
			body {
				background-color: #1c1c1e;
				color: #f5f5f7;
			}
			.test_buttons button {
				background-color: #3a3a3c;
				color: #f5f5f7;
				border: 1px solid #48484a;
			}
			.toast_ios_top {
				background-color: rgba(44, 44, 46, 0.75);
				box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4), 0 1px 3px rgba(0,0,0,0.2);
			}
			.ios_title {
				color: #ffffff;
			}
			.ios_message {
				color: #ebebf5;
			}
		}
	</style>
</head>
<body>
	
	<!-- ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ -->
	<div class="test_buttons">
		<button onclick="showIosToast('ìµœì‹  ì•Œë¦¼ì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤.')">iOS í† ìŠ¤íŠ¸ íŒì—… ë„ìš°ê¸°</button>
	</div>

	<!-- iOS ìŠ¤íƒ€ì¼ ìƒë‹¨ í† ìŠ¤íŠ¸ íŒì—… ë ˆì´ì–´ -->
	<div class="toast_ios_top" id="toastIos">
		<div class="ios_icon">ğŸ’¬</div>
		<div class="ios_text_wrap">
			<div class="ios_title">ì•Œë¦¼</div>
			<div class="ios_message" id="toastIosMsg">ë©”ì‹œì§€ ë‚´ìš©</div>
		</div>
	</div>

	<script>
		// iOS ìŠ¤íƒ€ì¼ ìƒë‹¨ í† ìŠ¤íŠ¸ ë¡œì§ (ìŠ¤ì™€ì´í”„ ë‹«ê¸° í¬í•¨)
		const toastIos = document.getElementById('toastIos');
		const toastIosMsg = document.getElementById('toastIosMsg');
		let iosToastTimer;

		// í„°ì¹˜/ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ìš© ìƒíƒœ ë³€ìˆ˜
		let startY = 0;
		let currentY = 0;
		let isDragging = false;
		let dragRafId = null; // ìµœì í™”ìš© ì• ë‹ˆë©”ì´ì…˜ í”„ë ˆì„ ID

		function showIosToast(message) {
			toastIosMsg.textContent = message; 

			// ê¸°ì¡´ ë‹«í˜ ìƒíƒœì—ì„œ ë³µêµ¬
			toastIos.classList.remove('hiding');
			toastIos.style.opacity = '1';
			toastIos.style.transform = 'translateY(0) scale(1)';
			
			toastIos.classList.add('show');
			
			clearTimeout(iosToastTimer);
			iosToastTimer = setTimeout(hideIosToast, 3000); // 3ì´ˆ ë’¤ ìë™ ë‹«í˜
		}

		function hideIosToast() {
			toastIos.style.transition = ''; // ê¸°ë³¸ CSS íŠ¸ëœì§€ì…˜ì„ ë‹¤ì‹œ í™œì„±í™”
			toastIos.classList.add('hiding'); // í¬ê¸° ì¶•ì†Œ + íˆ¬ëª…ë„ ì• ë‹ˆë©”ì´ì…˜ í´ë˜ìŠ¤ 
			
			// ì• ë‹ˆë©”ì´ì…˜ì´ ëë‚œ í›„ ì™„ì „íˆ ì´ˆê¸°í™”
			setTimeout(() => {
				toastIos.classList.remove('show');
				toastIos.classList.remove('hiding');
				toastIos.style.transform = 'translateY(0)';
			}, 400); // hiding CSSì˜ íƒ€ì´ë¨¸(0.4s)ì™€ ë§ì¶¤

			clearTimeout(iosToastTimer);
		}

		// ë“œë˜ê·¸(ìŠ¤ì™€ì´í”„) ê¸°ëŠ¥ ì •ì˜ (ë§ˆìš°ìŠ¤ & í„°ì¹˜ ê³µìš©)
		const onDragStart = (e) => {
			if (!toastIos.classList.contains('show')) return; // ìˆ¨ê²¨ì§„ ìƒíƒœë©´ ë¬´ì‹œ
			startY = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
			isDragging = true;
			toastIos.style.transition = 'none'; // ì†ì„ ë”°ë¼ì˜¤ê²Œ í•˜ê¸° ìœ„í•´ ì¦‰ì‹œ íŠ¸ëœì§€ì…˜ í•´ì œ
		};

		const onDragMove = (e) => {
			if (!isDragging) return;
			
			// ê¸°ë³¸ ë¸Œë¼ìš°ì € ìŠ¤í¬ë¡¤ ì´ë²¤íŠ¸ë¥¼ ì™„ì „íˆ ë°©ì–´í•´ í™”ë©´ í”ë“¤ë¦¼(ë²„ë²…ì„)ì„ ì˜ˆë°©
			if (e.cancelable) e.preventDefault(); 
			
			const y = e.type.includes('mouse') ? e.clientY : e.touches[0].clientY;
			const deltaY = y - startY;

			// RequestAnimationFrameì„ í†µí•´ ìŠ¤ë§ˆíŠ¸í°ì˜ 60Hz/120Hz ì£¼ì‚¬ìœ¨ì— ë§ì¶° ë¶€ë“œëŸ½ê²Œ ë Œë”ë§í•˜ë„ë¡ ë¬¶ê¸°
			if (dragRafId) cancelAnimationFrame(dragRafId);
			
			dragRafId = requestAnimationFrame(() => {
				// ìœ„ë¡œ ì“¸ì–´ì˜¬ë¦¬ëŠ” ë™ì‘ ìœ„ì£¼ë¡œ í—ˆìš©í•˜ê³  ì•„ë˜ë¡œëŠ” ì«€ì«€í•˜ê³  ë¬µì§í•˜ê²Œ ì €í•­(0.15ë°°)
				if (deltaY < 0) {
					toastIos.style.transform = `translateY(${deltaY}px)`;
					currentY = deltaY;
				} else if (deltaY > 0) {
					toastIos.style.transform = `translateY(${deltaY * 0.15}px)`;
					currentY = deltaY;
				}
			});
		};

		const onDragEnd = () => {
			if (!isDragging) return;
			isDragging = false;
			if (dragRafId) cancelAnimationFrame(dragRafId);
			toastIos.style.transition = ''; // íŠ¸ëœì§€ì…˜ ì›ìƒë³µêµ¬

			if (currentY <= -15) {
				// -15px ì´ìƒ ìœ„ë¡œ ë°€ì–´ì˜¬ë ¸ë‹¤ë©´ ë‹«ê¸° ì• ë‹ˆë©”ì´ì…˜ ì‹¤í–‰
				hideIosToast();
			} else {
				// ëœ ë°€ì—ˆë‹¤ë©´ ì œìë¦¬ë¡œ íŠ•ê²¨ì„œ ë³µê·€
				toastIos.style.transform = 'translateY(0) scale(1)';
			}
			currentY = 0;
		};

		// í„°ì¹˜ ì´ë²¤íŠ¸ ì—°ê²°
		toastIos.addEventListener('touchstart', onDragStart, { passive: true });
		toastIos.addEventListener('touchmove', onDragMove, { passive: false });
		toastIos.addEventListener('touchend', onDragEnd);

		// ë§ˆìš°ìŠ¤ ì´ë²¤íŠ¸ ì—°ê²° (ì›¹ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ í¸ì˜ìš©)
		toastIos.addEventListener('mousedown', onDragStart);
		window.addEventListener('mousemove', onDragMove, { passive: false });
		window.addEventListener('mouseup', onDragEnd);
	</script>
</body>
</html>
